# Next.js + NestJS Monorepo Template
# Production-ready monorepo with separate frontend and backend

id: nextjs-nestjs-monorepo
name: Next.js + NestJS Monorepo
description: Enterprise monorepo with Next.js 15 frontend and NestJS 10 backend. Features Turborepo, pnpm workspaces, and shared packages. Best for scalable full-stack applications.
complexity: intermediate
architecture: monorepo

tags:
  - nextjs
  - nestjs
  - react
  - typescript
  - monorepo
  - turborepo
  - full-stack

requirements:
  docker: true
  dockerCompose: "2.20.0"
  node: "18.0.0"
  pnpm: true
  uv: false

techStack:
  frontend:
    framework: nextjs
    version: "15.0.0"
    language: typescript
    styling: tailwindcss
    uiLibrary: shadcn-ui
    stateManagement: zustand
  backend:
    framework: nestjs
    version: "10.0.0"
    language: typescript
    runtime: node
    apiStyle: rest
  database:
    primary: supabase
    version: "15"
    orm: drizzle
    migrations: drizzle-kit
    vector: pgvector
  testing:
    unit: vitest
    integration: supertest
    e2e: playwright
  deployment:
    containerization: docker
    ci: github-actions
  packageManager:
    node: pnpm
    monorepo: turborepo

features:
  authentication: true
  aiIntegration: false
  email: false
  fileStorage: true
  realtime: true

files:
  # Root configuration
  - source: package.json
    destination: package.json
    type: template
    required: true

  - source: pnpm-workspace.yaml
    destination: pnpm-workspace.yaml
    type: copy
    required: true

  - source: turbo.json
    destination: turbo.json
    type: template
    required: true

  - source: tsconfig.json
    destination: tsconfig.json
    type: copy
    required: true

  # Docker
  - source: docker-compose.yml
    destination: docker-compose.yml
    type: template
    required: true

  - source: Dockerfile.frontend
    destination: apps/frontend/Dockerfile
    type: template
    required: true

  - source: Dockerfile.backend
    destination: apps/backend/Dockerfile
    type: template
    required: true

  # Frontend (Next.js)
  - source: apps/frontend/package.json
    destination: apps/frontend/package.json
    type: template
    required: true

  - source: apps/frontend/next.config.ts
    destination: apps/frontend/next.config.ts
    type: copy
    required: true

  - source: apps/frontend/tsconfig.json
    destination: apps/frontend/tsconfig.json
    type: copy
    required: true

  - source: apps/frontend/tailwind.config.ts
    destination: apps/frontend/tailwind.config.ts
    type: copy
    required: true

  - source: apps/frontend/.env.example
    destination: apps/frontend/.env.example
    type: template
    required: true

  # Backend (NestJS)
  - source: apps/backend/package.json
    destination: apps/backend/package.json
    type: template
    required: true

  - source: apps/backend/nest-cli.json
    destination: apps/backend/nest-cli.json
    type: copy
    required: true

  - source: apps/backend/tsconfig.json
    destination: apps/backend/tsconfig.json
    type: copy
    required: true

  - source: apps/backend/.env.example
    destination: apps/backend/.env.example
    type: template
    required: true

  # Shared packages
  - source: packages/shared/package.json
    destination: packages/shared/package.json
    type: template
    required: true

  - source: packages/shared/tsconfig.json
    destination: packages/shared/tsconfig.json
    type: copy
    required: true

  # CI/CD
  - source: .github/workflows/ci.yml
    destination: .github/workflows/ci.yml
    type: copy
    required: true

  # Documentation
  - source: README.md
    destination: README.md
    type: template
    required: true

  - source: docs/structure.md
    destination: docs/structure.md
    type: copy
    required: true

  # Git
  - source: .gitignore
    destination: .gitignore
    type: copy
    required: true

  - source: .env.example
    destination: .env.example
    type: template
    required: true

dockerServices:
  - name: postgres
    image: supabase/postgres:15.1.0.147
    ports:
      - "54322:5432"
    required: true

  - name: supabase-auth
    image: supabase/gotrue:v2.132.3
    ports:
      - "54321:9999"
    required: true
    features:
      - authentication

  - name: supabase-storage
    image: supabase/storage-api:v0.43.11
    ports:
      - "54324:5000"
    required: false
    features:
      - fileStorage

  - name: supabase-realtime
    image: supabase/realtime:v2.25.50
    ports:
      - "54323:4000"
    required: false
    features:
      - realtime

  - name: redis
    image: redis:7-alpine
    ports:
      - "6379:6379"
    required: true

  - name: langfuse
    image: langfuse/langfuse:latest
    ports:
      - "3001:3000"
    required: false
    features:
      - aiIntegration

  - name: mailhog
    image: mailhog/mailhog:latest
    ports:
      - "1025:1025"
      - "8025:8025"
    required: false
    features:
      - email

setupCommands:
  - description: Install dependencies
    command: pnpm install

  - description: Build shared packages
    command: pnpm build --filter=@{{projectName}}/shared

  - description: Run database migrations
    command: pnpm --filter=@{{projectName}}/backend db:migrate

  - description: Start development servers
    command: pnpm dev

metadata:
  author: AgentWeaver Team
  version: 1.0.0
  lastUpdated: "2025-11-05"
  documentationUrl: https://github.com/CodeLift-LLC/AgentWeaver-CLI
